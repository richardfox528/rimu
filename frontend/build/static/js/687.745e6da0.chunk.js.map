{"version":3,"file":"static/js/687.745e6da0.chunk.js","mappings":"8KAKA,MAuJA,EAvJkCA,KAChC,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAASC,IAAcF,EAAAA,EAAAA,UAAS,KAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,KAC5BK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,KAC5BO,EAAQC,IAAaR,EAAAA,EAAAA,UAAS,MAE/BS,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,KAAO,IAADC,EAAAC,EAAAC,EAWd,GATkB,QAAlBF,EAAIH,EAASM,aAAK,IAAAH,GAAdA,EAAgBT,OAClBC,EAASK,EAASM,MAAMZ,OAGR,QAAlBU,EAAIJ,EAASM,aAAK,IAAAF,GAAdA,EAAgBG,SAClBV,EAAUG,EAASM,MAAMC,SAIR,QAAfF,EAACL,EAASM,aAAK,IAAAD,IAAdA,EAAgBX,MAAO,CAC1B,MAAMc,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,MAC5DJ,EAASd,OACXC,EAASa,EAASd,OAEhBc,EAASK,IACXhB,EAAUW,EAASK,GAEvB,IACC,CAACb,IAoDJ,OACEc,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4DAA2DC,UACxEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oDAAmDC,SAAA,EAChEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mBAAkBC,UAC/BF,EAAAA,EAAAA,KAAA,OACEC,UAAU,oCACVG,KAAK,OACLC,OAAO,eACPC,QAAQ,YACRC,MAAM,6BAA4BL,UAElCF,EAAAA,EAAAA,KAAA,QACEQ,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,8IAKRX,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sDAAqDC,SAAC,yCAGpEC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,iCAAgCC,SAAA,CAAC,2HAEY,KACxDF,EAAAA,EAAAA,KAAA,UAAAE,SAAStB,OAGVJ,IACCwB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mEAAkEC,UAC/EF,EAAAA,EAAAA,KAAA,KAAAE,SAAI1B,MAIPE,IACCsB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,6DAA4DC,UACzEF,EAAAA,EAAAA,KAAA,KAAAE,SAAIxB,OAIRyB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,UACEY,QA7FuBC,UAC/B,GAAKjC,EAAL,CAKAN,GAAW,GACXK,EAAS,IACTF,EAAW,IAEX,WACyBqC,EAAAA,EAAMC,MAC3BC,EAAAA,EAAAA,IAAU,2CACV,CACEpC,MAAOA,EACPqC,aAAcC,OAAOhC,SAASiC,UAIrBC,KAAKC,SAChB5C,EACE,8FAGN,CAAE,MAAO6C,GAAM,IAADC,EAAAC,EACZ7C,GACc,QAAZ4C,EAAAD,EAAIG,gBAAQ,IAAAF,GAAM,QAANC,EAAZD,EAAcH,YAAI,IAAAI,OAAN,EAAZA,EAAoB9C,QAClB,iDAEN,CAAC,QACCJ,GAAW,EACb,CA3BA,MAFEK,EAAS,oDA6BX,EA+DQsB,UAAU,qJACVyB,SAAUrD,EAAQ6B,SAEjB7B,EAAU,cAAgB,wCAG7B2B,EAAAA,EAAAA,KAAA,UACEY,QAnEqBe,KAC7B3C,EAAS,2BAA4B,CACnCQ,MAAO,CACLZ,MAAOA,EACPa,QAASX,IAEX,EA8DMmB,UAAU,+IAA8IC,SACzJ,2BAIDF,EAAAA,EAAAA,KAAA,UACEY,QAjEWgB,KAEnB/B,aAAagC,WAAW,SACxBhC,aAAagC,WAAW,YACxB7C,EAAS,SAAS,EA8DViB,UAAU,qKAAoKC,SAC/K,yCAKD,C","sources":["pages/EmailVerificationRequired.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { getApiUrl } from \"../utils/config\";\n\nconst EmailVerificationRequired = () => {\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [userId, setUserId] = useState(null);\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    // Get email from location state if available\n    if (location.state?.email) {\n      setEmail(location.state.email);\n    }\n\n    if (location.state?.user_id) {\n      setUserId(location.state.user_id);\n    }\n\n    // Fallback to localStorage if no state\n    if (!location.state?.email) {\n      const userInfo = JSON.parse(localStorage.getItem(\"userInfo\") || \"{}\");\n      if (userInfo.email) {\n        setEmail(userInfo.email);\n      }\n      if (userInfo.id) {\n        setUserId(userInfo.id);\n      }\n    }\n  }, [location]);\n\n  const handleResendVerification = async () => {\n    if (!email) {\n      setError(\"Email information not found. Please log in again.\");\n      return;\n    }\n\n    setLoading(true);\n    setError(\"\");\n    setMessage(\"\");\n\n    try {\n      const response = await axios.post(\n        getApiUrl(\"api/accounts/resend-verification-email/\"),\n        {\n          email: email,\n          frontend_url: window.location.origin,\n        }\n      );\n\n      if (response.data.success) {\n        setMessage(\n          \"Un nuevo correo de verificación ha sido enviado. Por favor revisa tu bandeja de entrada.\"\n        );\n      }\n    } catch (err) {\n      setError(\n        err.response?.data?.error ||\n          \"Error al reenviar el correo de verificación\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGoToVerification = () => {\n    navigate(\"/auth/email-verification\", {\n      state: {\n        email: email,\n        user_id: userId,\n      },\n    });\n  };\n\n  const handleLogout = () => {\n    // Clear token and redirect to login\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"userInfo\");\n    navigate(\"/login\");\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\n      <div className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\">\n        <div className=\"text-center mb-6\">\n          <svg\n            className=\"mx-auto h-12 w-12 text-yellow-500\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n            />\n          </svg>\n        </div>\n\n        <h2 className=\"text-2xl font-bold text-center text-indigo-600 mb-3\">\n          Verificación de Correo Requerida\n        </h2>\n        <p className=\"text-gray-600 text-center mb-6\">\n          Para continuar, necesitas verificar tu dirección de correo\n          electrónico. Hemos enviado un email con instrucciones a{\" \"}\n          <strong>{email}</strong>\n        </p>\n\n        {message && (\n          <div className=\"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4\">\n            <p>{message}</p>\n          </div>\n        )}\n\n        {error && (\n          <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4\">\n            <p>{error}</p>\n          </div>\n        )}\n\n        <div className=\"space-y-3\">\n          <button\n            onClick={handleResendVerification}\n            className=\"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n            disabled={loading}\n          >\n            {loading ? \"Enviando...\" : \"Reenviar correo de verificación\"}\n          </button>\n\n          <button\n            onClick={handleGoToVerification}\n            className=\"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2\"\n          >\n            Ya tengo el código\n          </button>\n\n          <button\n            onClick={handleLogout}\n            className=\"w-full bg-white text-gray-700 py-2 px-4 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2\"\n          >\n            Volver al inicio de sesión\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EmailVerificationRequired;\n"],"names":["EmailVerificationRequired","loading","setLoading","useState","message","setMessage","error","setError","email","setEmail","userId","setUserId","navigate","useNavigate","location","useLocation","useEffect","_location$state","_location$state2","_location$state3","state","user_id","userInfo","JSON","parse","localStorage","getItem","id","_jsx","className","children","_jsxs","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","async","axios","post","getApiUrl","frontend_url","window","origin","data","success","err","_err$response","_err$response$data","response","disabled","handleGoToVerification","handleLogout","removeItem"],"sourceRoot":""}