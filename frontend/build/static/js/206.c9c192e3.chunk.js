"use strict";(self.webpackChunkRIMU=self.webpackChunkRIMU||[]).push([[206],{2206:(e,s,r)=>{r.r(s),r.d(s,{default:()=>l});var o=r(5043),a=r(6767),n=r(6213),t=r(2115),d=r(3574),i=r(579);const l=()=>{const[e,s]=(0,o.useState)(""),[r,l]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),p=(0,a.Zp)(),m=(0,a.zy)(),g=new URLSearchParams(m.search).get("token");return g?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset Password"}),(0,i.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password"})]}),(0,i.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async s=>{if(s.preventDefault(),e===r)if(e.length<8)t.oR.error("Password must be at least 8 characters long");else{u(!0);try{var o;const s=await n.A.put((0,d.e9)("api/accounts/auth/reset-password/"),{token:g,new_password:e});t.oR.success((null===(o=s.data)||void 0===o?void 0:o.message)||"Password successfully updated"),setTimeout((()=>{p("/login")}),2e3)}catch(m){var a,i,l,c;if("Reset token has expired"===(null===(a=m.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error))t.oR.error("The reset link has expired. Redirecting to password recovery..."),setTimeout((()=>{p("/forgot-password")}),2e3);else t.oR.error((null===(l=m.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.error)||"Error resetting password. Please try again.")}finally{u(!1)}}else t.oR.error("Passwords do not match")},children:[(0,i.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"new-password",className:"sr-only",children:"New Password"}),(0,i.jsx)("input",{id:"new-password",name:"new-password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"New Password",value:e,onChange:e=>s(e.target.value),minLength:8})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),(0,i.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirm New Password",value:r,onChange:e=>l(e.target.value),minLength:8})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"submit",disabled:c,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white ${c?"bg-indigo-400":"bg-indigo-600 hover:bg-indigo-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:c?"Processing...":"Reset Password"})})]})]})}):(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,i.jsxs)("div",{className:"text-center text-red-600",children:["Invalid or expired token. Please request a new reset link.",(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)("button",{onClick:()=>p("/forgot-password"),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Request New Link"})})]})})}}}]);
//# sourceMappingURL=206.c9c192e3.chunk.js.map